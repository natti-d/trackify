<!DOCTYPE html>
<html lang="en">

<!--Страница с всички проекти на един потребител-->

<!--ИЗПОЛЗВАНИ:
        - HTML5;
        - CSS3;
        - JAVASCRIPT;
        - BOOTSTRAP;
        - JQUERY;
    -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ПланА Проекти</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--Bootstrap 5.3.2 - JS-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <!--Bootstrap icons-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!--Bootstrap 5.3.2 - CSS-->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> <!--jQuery-->
    <script src="./creating_project.js"></script> <!--Скрипт за създаване на нов проект-->
    <link rel="stylesheet" href="scrollbars.css"><!--Стилово офромление на scrollbars-->
</head>

<!--CHUPI OPISANIETO-->

<body class="overflow-y-auto" style="background-color: #d6f1ff;" onload="generateProjectCard('pr', 'pr2', 1);">
    

    <!--Контейнер за проекти-->
    <div class="w-100 overflow-y-hidden overflow-x-hidden position-relative d-md-flex d-block" id="content-homepage"
        style="top: 0; background-color: #d6f1ff;">
        <div class="col-md-12 px-3">
            <!--Име на страница - Проекти-->
            <div class="overflow-hidden pt-2 d-flex justify-content-around" style="color: #004e7a;"
                id="projects-content">
                <div class="d-md-flex d-block justify-content-around">
                    <h2 class="py-2 px-4 col-md-8 w-100 text-center">Проекти</h2>
                </div>
            </div>
        </div>

        <!--Контейнер със задачи - За бъдеща реализация
        <div class="flex-fill m-4 overflow-y-auto overflow-x-hidden top-0" style="height: fit-content;"
            style="background-color: #F0F2F4;">
            <fieldset class="px-2 w-100 d-md-flex d-block position-relative" style="border: solid 2px #003554;">
                <legend class="fw-bold float-none ps-2" style="color: #003554;">Настоящи задачи</legend>
                <div class="w-100 d-block">
                    <div class="card mx-2 my-2" style="height: 100px; background-color: #37007a; color: #F0F2F4;">
                        <div class="card-img-overlay overflow-y-auto overflow-x-hidden py-1">
                            <div class="d-lg-flex d-block justify-content-between mx-2 align-middle m-auto">
                                <div class="w-100 my-0 my-lg-2">
                                    <h5 class="card-title w-100">Задача</h5>
                                    <p class="card-text w-100"><small>Име Проект</small></p>
                                </div>
                                <div class="w-100 my-0 my-lg-2">
                                    <p class="card-title w-100">24/12/2024</p>
                                    <p class="card-text w-100 d-lg-flex d-none"><small>Статус</small></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>-->
    </div>

    <!--Модал за създаване-->
    <div class="modal fade" id="create" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen-sm-down">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title fs-5" id="staticBackdropLabel">Създай проект</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="w-100">
                        <img class="img-fluid" src="./images/patterns for projects/blue-bg2.png" alt="Example of tables"
                            id="project-pattern">
                    </div>
                    <div class="form-floating w-100 mt-3 position-relative">
                        <input type="name" class="form-control" id="name-of-project" placeholder="name" required>
                        <label for="name-of-project">Име на проект</label>
                    </div>

                    <div class="w-100 mt-3 position-relative" id="color-picking">
                        <span>Гама на проект</span>
                        <ul class="colorpicker w-100 h-100 d-flex overflow-x-auto list-unstyled fs-4">
                            <li class="col-2 py-2 text-center text-light" id="red-bg" style="background-color: #F94144;"
                                onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-black" id="orange-bg"
                                style="background-color: #F3722C;" onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-black" id="yellow-bg"
                                style="background-color: #F9C74F;" onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-black" id="lime-bg"
                                style="background-color: #C5C35E;" onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-black" id="lightgreen-bg"
                                style="background-color: #90BE6D;" onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-light" id="green-bg"
                                style="background-color: #007a5e;" onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-light" id="blue-bg"
                                style="background-color: #314087;" onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-light" id="purple-bg"
                                style="background-color: #7462AB;" onclick="selectedColor(this.id)">A</li>
                            <li class="col-2 py-2 text-center text-light" id="pink-bg"
                                style="background-color: #8A4A8A;" onclick="selectedColor(this.id)">A</li>
                        </ul>
                    </div>

                    <div class="form-floating w-100 mt-3 position-relative">
                        <textarea type="name" class="form-control" id="description" placeholder="name"
                            style="min-height: 120px;" required></textarea>
                        <label for="description">Описание на проект</label>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="close-create-modal"
                        onclick="alert('Направените промени няма да се запазят.');"
                        data-bs-dismiss="modal">Отмени</button>
                    <button type="button" class="btn btn-primary" onclick="createProject();">Създай</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let cards_container = document.getElementById('cards-container');
        /*Генериране на карта за проект*/
        function generateProjectCard(name, description, bg) {
            let card = document.createElement('div');
            let text = getColors(bg)[1];
            let bgColor = getColors(bg)[0];
            card.classList.add('card', 'mx-1', 'mt-2', 'col-md-3', 'col-12', text);
            card.style.height = '150px';
            card.style.backgroundColor = bgColor;

            let card_display = document.createElement('div');
            card_display.classList.add('card-img-overlay', 'overflow-y-auto', 'overflow-x-hidden', 'text-break');

            let h5 = document.createElement('h5');
            h5.classList.add('card-title');
            h5.innerText = name;
            card_display.append(h5);

            let details = document.createElement('details');
            details.classList.add('d-flex');

            let summary = document.createElement('summary');
            summary.classList.add('card-text');
            summary.innerText = "Описание";
            details.append(summary);

            let p = document.createElement('p');
            p.classList.add('card-text');
            p.innerText = description;
            details.append(p);

            card_display.append(details);
            card.append(card_display);
            cards_container.append(card);
        }

        function getColors(bg) {
            switch (bg) {
                case 0: return ["#F94144", "text-light"]; break;
                case 1: return ["#F3722C", "text-black"]; break;
                case 2: return ["#F9C74F", "text-black"]; break;
                case 3: return ["#C5C35E", "text-black"]; break;
                case 4: return ["#90BE6D", "text-black"]; break;
                case 5: return ["#007A5E", "text-light"]; break;
                case 6: return ["#314087", "text-light"]; break;
                case 7: return ["#7462AB", "text-light"]; break;
                case 8: return ["#8A4A8A", "text-light"]; break;
                default: return ["#314087", "text-light"]; break;
            }
        }

        function getID(){
            return localStorage.getItem('user');
        }

        var userID = getID();
        var request = new XMLHttpRequest();
        request.open('GET', 'projects.php?' + userID, true);
        request.send();
    </script>
</body>

</html>